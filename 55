Alexa-hostedâ†’ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¸ã®ç§»è¡Œ


ã‚¹ã‚­ãƒ«ã‚’è¤‡æ•°é–‹ç™ºã—ãŸã®ã§ä¸€å…ƒçš„ã«ç®¡ç†ã‚’ã—ãŸã„ç­‰ã„ã‚ã„ã‚ãªç†ç”±ã§ã€Alexa-hostedã§ç®¡ç†ã—ã¦ã„ãŸã‚¹ã‚­ãƒ«ã‚’ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã«ç§»è¡Œã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚

ä»Šå›ã¯Alexa-hostedã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¸ã®ç§»è¡Œæ–¹æ³•ã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ãŠãã¾ã™ã€‚

ç¶šãã‚’èª­ã‚€
ğŸ”—äº‹å‰æº–å‚™
ğŸ”—Alexa-hostedã‚¹ã‚­ãƒ«
å‰å›ã®è¨˜äº‹ã‚’å‚è€ƒã«Alexa-hostedã‚¹ã‚­ãƒ«ã‚’ä½œæˆã—ã¦ãŠã„ã¦ä¸‹ã•ã„ã€‚

ğŸ”—lambda
ä»¥å‰ã®è¨˜äº‹ã‚’å‚è€ƒã«Lambdaã‚’ä½œæˆã—ã¦ãŠã„ã¦ä¸‹ã•ã„ã€‚

Alexaã«Lambdaã®ARNã‚’è²¼ã£ãŸã‚Šã€Lambdaã«Alexaã®ã‚¹ã‚­ãƒ«IDã‚’è²¼ã£ãŸã‚Šã¨ã„ã£ãŸä½œæ¥­ã¯ã€ã“ã®è¨˜äº‹ã§è¡Œã„ã¾ã™ã®ã§ã€Lambdaã®é–¢æ•°ã‚’ä½œæˆã—ã¦ã„ã‚‹ã ã‘ã§å¤§ä¸ˆå¤«ã§ã™ã€‚

ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹å†…å®¹ã‚’è²¼ã‚Šä»˜ã‘ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã®ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«ã—ã¦ä¸‹ã•ã„ã€‚

const Alexa = require('ask-sdk-core');
const LaunchRequestHandler = {
    canHandle(handlerInput) {
        return Alexa.getRequestType(handlerInput.requestEnvelope) === 'LaunchRequest';
    },
    handle(handlerInput) {


        const speakOutput = "ç„¡äº‹ã«è¨­å®šå¤‰æ›´ã§ãã¾ã—ãŸ";
        return handlerInput.responseBuilder
            .speak(speakOutput)
            .reprompt(speakOutput)
            .getResponse();
    }
};

const HelpIntentHandler = {
    canHandle(handlerInput) {
        return Alexa.getRequestType(handlerInput.requestEnvelope) === 'IntentRequest'
            && Alexa.getIntentName(handlerInput.requestEnvelope) === 'AMAZON.HelpIntent';
    },
    handle(handlerInput) {
        const speakOutput = ('ç„¡äº‹ã«è¨­å®šå¤‰æ›´ã§ãã¾ã—ãŸ');
        return handlerInput.responseBuilder
            .speak(speakOutput)
            .reprompt(speakOutput)
            .getResponse();
    }
};
const CancelAndStopIntentHandler = {
    canHandle(handlerInput) {
        return Alexa.getRequestType(handlerInput.requestEnvelope) === 'IntentRequest'
            && (Alexa.getIntentName(handlerInput.requestEnvelope) === 'AMAZON.CancelIntent'
                || Alexa.getIntentName(handlerInput.requestEnvelope) === 'AMAZON.StopIntent');
    },
    handle(handlerInput) {
        const speakOutput = ('ã¾ãŸã­');

        return handlerInput.responseBuilder
            .speak(speakOutput)
            .getResponse();
    }
};
const FallbackIntentHandler = {
    canHandle(handlerInput) {
        return Alexa.getRequestType(handlerInput.requestEnvelope) === 'IntentRequest'
            && Alexa.getIntentName(handlerInput.requestEnvelope) === 'AMAZON.FallbackIntent';
    },
    handle(handlerInput) {
        const speakOutput = ('FALLBACK_MSG');

        return handlerInput.responseBuilder
            .speak(speakOutput)
            .reprompt(speakOutput)
            .getResponse();
    }
};
const SessionEndedRequestHandler = {
    canHandle(handlerInput) {
        return Alexa.getRequestType(handlerInput.requestEnvelope) === 'SessionEndedRequest';
    },
    handle(handlerInput) {
        console.log(`~~~~ Session ended: ${JSON.stringify(handlerInput.requestEnvelope)}`);
        // Any cleanup logic goes here.
        return handlerInput.responseBuilder.getResponse(); // notice we send an empty response
    }
};
const IntentReflectorHandler = {
    canHandle(handlerInput) {
        return Alexa.getRequestType(handlerInput.requestEnvelope) === 'IntentRequest';
    },
    handle(handlerInput) {
        const intentName = Alexa.getIntentName(handlerInput.requestEnvelope);
        const speakOutput = ('REFLECTOR_MSG', {intentName: intentName});

        return handlerInput.responseBuilder
            .speak(speakOutput)
            //.reprompt('add a reprompt if you want to keep the session open for the user to respond')
            .getResponse();
    }
};
const ErrorHandler = {
    canHandle() {
        return true;
    },
    handle(handlerInput, error) {
        const speakOutput = ('ERROR_MSG');
        console.log(`~~~~ Error handled: ${JSON.stringify(error)}`);

        return handlerInput.responseBuilder
            .speak(speakOutput)
            .reprompt(speakOutput)
            .getResponse();
    }
};
exports.handler = Alexa.SkillBuilders.custom()
    .addRequestHandlers(
        LaunchRequestHandler,
        HelpIntentHandler,
        CancelAndStopIntentHandler,
        FallbackIntentHandler,
        SessionEndedRequestHandler,
        IntentReflectorHandler,
    )
    .addErrorHandlers(
        ErrorHandler,
    )
     .withPersistenceAdapter(
     )
    .lambda();

- Lang Select -
ãƒ•ã‚¡ã‚¤ãƒ«å
data-lineå±æ€§å€¤
ğŸ”—ç§»è¡Œä½œæ¥­
äº‹å‰æº–å‚™ã§ä½œæˆã—ã¦ãŠã„ãŸã‚¹ã‚­ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€1,2ã®é †ã§é€²ã¿ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2021-01-21-18.10.31-1024x343.png
ä»¥å‰ã®è¨˜äº‹ã§è¡Œã£ãŸLambdaã«Alexaã‚¹ã‚­ãƒ«ã®ã‚¹ã‚­ãƒ«IDã‚’ç™»éŒ²ã€Alexaã«Lambdaã®ARNã®ç™»éŒ²ã‚’ã—ã¦ã„ãã¾ã™ã€‚

Alexaã®ã‚¹ã‚­ãƒ«IDã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2021-01-21-18.21.36-1024x479.png
äº‹å‰æº–å‚™ã—ã¦ãŠã„ãŸLmbdaãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«é€²ã¿ã€1ã§ãƒˆãƒªã‚¬ãƒ¼ã‚’å‰Šé™¤ã—ã€2ã«é€²ã¿ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2021-01-21-18.38.26-1024x540.png
1ã§Alexa Skills Kitã‚’é¸æŠã—ã€2ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãŠã„ãŸAlexaã®ã‚¹ã‚­ãƒ«IDã‚’å…¥åŠ›ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2021-01-21-18.40.48-1024x717.png
Lambdaã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚ã‚‹ARNã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2021-01-21-18.44.52-1024x369.png
æ¬¡ã«Alexaã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚Šã€ã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®åœ°åŸŸã€ã«Lambdaã®ARNã‚’è²¼ã‚Šä»˜ã‘ã€ã€Œã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä¿å­˜ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2021-01-21-18.48.07-1-1024x490.png
ã™ã‚‹ã¨ã€ã“ã®å¤‰æ›´ã‚’ã™ã‚‹ã“ã¨ã§ã€ŒAlexa-hostedã€ã§ã¯ãªããªã‚‹ã‚ˆã¨ã„ã†è­¦å‘Šæ–‡ãŒå‡ºã¦ãã¾ã™ã€‚

ã“ã‚Œã¯æ­£å¸¸ãªæµã‚Œãªã®ã§Continueã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2021-01-21-18.51.17-1024x292.png
ä»¥ä¸Šã§Alexa-hostedã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¸ã®ç§»è¡Œã¯çµ‚äº†ã§ã™ã€‚

ã‚µãƒ¼ãƒ“ã‚¹ã«å½±éŸ¿ãŒãªã„ã‹ç¢ºèªã—ã¦ã„ãã¾ã™ã€‚

ã¾ãšã¯ã€ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ã«é€²ã‚€ã¨ä»¥ä¸‹ã®æ§˜ã«ã€Alexa-hostedã§ã¯ãªããªã£ãŸã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2021-01-21-18.55.40-1024x252.png
ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ã“ã¨ã§ã€ä½œæˆã—ãŸLambdaã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚³ãƒ¼ãƒ‰ãŒå‹•ã„ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2021-01-21-19.05.20-1024x315.png
ã¾ã¨ã‚
ç°¡å˜ã«è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ã®ãŒé¢å€’ãªã®ã§ã€Alexa-hostedã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹æ–¹ã‚‚ã„ã‚‰ã£ã—ã‚ƒã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚

ä»Šå›ã®ä½œæ¥­ã‚’ã™ã‚‹ã«ã¯AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒå¿…è¦ã«ãªã‚‹ã®ã§ã€ã“ã¡ã‚‰ã‚’å‚è€ƒã«ä½œæˆã—ã¦ä¸‹ã•ã„ã€‚

