Route53とALBとの連携をしました


AWSにはDNSサービスであるRoute53があります。

DNSに関しては前の記事で説明したので参考にしてください。

今回は以下の様な構成を作成します。


目次 [非表示]

1 🔗事前準備
2 🔗ドメインについて
2.1 🔗トップレベルドメイン
2.2 🔗独自ドメイン
2.3 🔗サブドメイン
3 🔗Route53の設定
4 料金表
5 まとめ
🔗事前準備
前回の記事を参考に以下構成を作成しておいてください。


🔗ドメインについて
ドメインは .（ドット）で区切られた場所によって呼び方が異なり、以下の3つに分けることができます。


🔗トップレベルドメイン
ドットで区切られた一番端の文字列で、comやjpといったものはよく見るかと思います。

このトップレベルドメインを使うのには年間利用料を支払う必要があります。

🔗独自ドメイン
トップレベルドメインを購入すると自分独自の文字列を独自ドメインに定義することができます。

この時独自ドメインは世界中で一意である必要があります。

🔗サブドメイン
自分で設定した独自ドメインの中で、サブドメインを作成することができます。

独自ドメインを作成するのには、トップレベルドメインを利用する料金がかかりますが、サブドメインを作成するのには料金がかからないです。

例えば以下の例だとmiki0116.comを購入していると、aws.miki0116.comやgcp.miki0116.comといったサブドメインを無料で作成することができます。

🔗Route53の設定
今回はmiki0116.comという独自ドメインに対して、blog.miki0116.comというサブドメインを作成していきます。

Route53のダッシュボードから「ホストゾーン」>「ホストゾーンの作成」を選択します。


次の画面でドメイン名に「blog.miki0116.com」と入力します。

新しくblog.miki0116.comというサブドメインができました。

このサブドメインのレコードタイプがNSの値をコピーします。


「ホストゾーン」で独自ドメインを選択します。

Route53でドメインを登録したのであれば、説明に「HostedZone created by Route53 Registrar」と書いています。


次の画面で「レコードを作成」を選択します。

「ルーティングポリシー」ではドメインに関連付けるインスタンスへのトラフィックの分散方法を決めることができます。


次の画面で「シンプルなレコードを定義」を選択します。

次に「レコード名」にサブドメインとして定義したい文字列を入力します。

「レコードタイプに応じたIPアドレスまたは別の値」でblog.miki0116.comというサブドメインを作成した時に、コピーしておいた値を貼り付けます。


次の画面で「レコードを作成」を選択します。

「blog.miki0116.com」を選択します。


次に「レコードを作成」>「シンプルルーティング」>「シンプルなレコードを定義」の順で設定を進めます。

レコード名は空白のままで、値には「Application Load Barancer と Classic Load Balancerへのエイリアス」>「ALBがあるリージョン」>「dualstack+ALBのDNS名」を入力します。


次の画面で「レコードを作成」を選択します。

設定したドメインをブラウザに入力すると、インスタンスにアクセスできていることが確認できます。


料金表


まとめ
Route53について学習する中で、ドメインについて理解が深まりました。

ルーティングの設定では他に試したいものがあったのでまた試してみます。

