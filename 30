SNSの機能についてまとめました


今までSNSの機能をいくつか使いたくて学習していたので今回まとめました。

続きを読む
🔗SNSの主要機能
SNSの主要機能は発行者と購読者との中継を特化した機能です。

例えば前回の記事ではCloudWatchが発行者で、gmailが購読者です。

画像に alt 属性が指定されていません。ファイル名: Untitled-Diagram-5.png
🔗トピック
トピックは発行者からのメッセージを保存しておく箱をイメージして頂けたらと思います。

画像に alt 属性が指定されていません。ファイル名: Untitled-Diagram-3-2.png
🔗暗号化
転送中のメッセージはデフォルトで暗号化してくれていますが、トピックに入ったメッセージに関してはデフォルトでは暗号化してくれていないです。

トピックに入ったメッセージも暗号化するには、AWSリソースのKMSを利用する必要があり、KMSは従量課金です。

🔗アクセスポリシー 
トピックにメッセージを発行できるユーザー、トピックから購読できるユーザーを指定することができます。

デフォルトでは両方ともトピック作成者だけが利用できる様になっています。

🔗配信再試行ポリシー (HTTP/S) 
発行者からトピックに届いたメッセージが購読者都合で送信に失敗した場合、何回再送信するのか設定できます。

郵便局でいう荷物再配達のやりとりの様なものです。

🔗配信ステータスのログ記録
発行者からトピックに届いたか、届かなかったかを記録するシステムです。

この記録はCloudWatchで確認することができます。

郵便局でいうと追跡サービスの様なものです。

🔗タグ
以前の記事を参考にしてください。

🔗サブスクリプション
サブスクリプションは「購読者」に当たるもので以下のものがあります。

一つのトピックに対して、複数のサブスクリプションを指定することができます。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-10-12-21.42.45-1024x744.png
🔗サブスクリプションフィルターポリシー
トピックに入ってきたメッセージの中から、購読者に届ける条件を指定することができます。

画像に alt 属性が指定されていません。ファイル名: Untitled-Diagram-4-1.png
🔗Redrive ポリシー (デッドレターキュー) 
もし発行者がメッセージを発行しても、購読者がサーバーエラー等によりメッセージを受信できなかったとします。

この時、SQSというAWSリソースのデッドレターキューという所にメッセージを移動し、原因追求、一定時間保存することができます。

画像に alt 属性が指定されていません。ファイル名: Untitled-Diagram-3-1.png
🔗プッシュ通知
以下の様にプッシュ通知を表示させることができます。

iphoneでプッシュ通知を表示させようとすると、Apple Developer Programに登録する必要があり、年間の会費がかかる様です。

他の端末に関しては調べていないのでいくらかかるのかはわかりません。

画像に alt 属性が指定されていません。ファイル名: image0.png
🔗モバイルテキストメッセージング (SMS)
以下の様にSMSを送ることができます。

日本の国番号は「+81」なので電話番号の頭につける必要があります。

画像に alt 属性が指定されていません。ファイル名: image0-1.png

﻿

料金表
画像に alt 属性が指定されていません。ファイル名: Untitled-Diagram-4-2.png
まとめ
この記事を書くまではトピック、サブスクリプションの設定をする時に、オプション機能は使っていなかったので、今回調べて大変便利な機能があることに気付けて良かったです。

また別の記事でそれぞれのオプションも触ってみたいです。

現状、プッシュ通知はSNSでしかできないかと思っていますが、もし方法あれば教えて頂けたら幸いです。

