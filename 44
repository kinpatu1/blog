Cost Explorerについてまとめました

AWSにはコストを計算するツールがたくさんあり、これからそれらについて記事を書いていきます。

今回はAWSを導入した後にコスト管理を行うためのツールであるCost Explorerについて書きます。

Cost Explorerを使うことで、リソースにかかった、将来かかる料金を把握することができます。

続きを読む
Cost Explorer
Cost Explorerを利用開始すると、当月のデータはすぐに見ることができるが、過去、将来のデータは表示できる様になるまでに時間がかかるそうです。

この画面では自分でレポートを作成することができるが、その時に便利な項目だけまとめておきます。

Select a Range
ここでグラフを表示したい期間を選ぶことができます。

+3M、+12Mを選択することで将来かかる料金を予測することができます。

フィルター
レポートに対してフィルターをかけることで、自分が知りたい情報だけを残したレポートを作成することができます。

詳細オプション
詳細オプションを利用することで、法人はより詳細なレポートを作成することができます。

この中で出てくるブレンドとは、Organizationsを利用しているアカウントで、Organizationsに属している全アカウントにかかっている料金を把握するためのものです。

詳細についてはこちらを参考にしてください。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-12-21-1.28.42-1024x672.png
レポート
最初からいくつかのレポートが用意されています。これらを変更することはできませんが、これらのレポートをベースにオリジナルのレポートを作成することができます。

また、自分で作成したレポートをここに保存することもできます。

Budgets
こちらの機能は予算を設定し、予算を超えた時、超えそうな時にEメール等で利用者に知らせることができます。

以前の記事で紹介した方法と違う点として、Cost Explorerはコストの実績に基づき将来のコストを計算します。

そして、その将来のコストが予算を超えそうになると、利用者に知らせることができます。

予算タイプの選択
「Cost Explorerのダッシュボード」>「Budgets」>「予算を作成する」の順でクリックします。

予約、Savings Plansに関しては、まだ紹介していませんが、閾値を設定し、閾値を超えた時の連絡先を設定するという点で同じです。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-12-21-3.18.05-1024x382.png
予算を設定
間隔
予算を設定する期間を指定することができます。

Budget effective dates
予算に対して有効期限をつけるのか、設定を削除するまで残しておくのか選択できます。

毎月の予算を指定する
毎月の予算を固定にするか、毎月の予算を月によって変更するのか選択することができます。

追加の予算パラメータを設定
Cost Explorerで説明した、フィルター、詳細オプションを利用した状態のコストを予算に指定することができます。

しきい値を設定する
予算のしきい値を定義する
ここで予測コストに基づいたアラート設定をすることができます。

通知を設定する
閾値を超えた時に連携させたいE メール、SNSを指定することができます。

SNSのarnは「SNSのダッシュボード」>「トピック」で確認できます。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-12-21-3.51.41-1024x210.png
コスト異常検出
サービス使用履歴に基づき、機械学習を使用して異常しきい値を自動的に算出します。

検出履歴
過去に異常と評価されたものを見ることができます。

コストモニター
以下4つの項目をモニタリングすることができます。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-12-21-13.19.17-1024x631.png
アラートサブスクリプション
異常が検出された時にアラートを鳴らすための閾値、閾値を超えた時の連絡先を指定します。

推奨事項
リソース最適化
インスタンスをダウンサイジング、終了することにより、コスト削減の機会を特定するのに役立ちます。

AWS Cost Explorer、推奨事項にチェックを入れることで、利用することができます。

但しダウンサイジング、終了することができるかをチェックするためにインスタンスを調査する必要があり、これには料金が発生します。

予約購入の推奨事項
オンデマンドインスタンスを利用している場合、リザーブドインスタンスを利用することでコストを減らすことができます。

この画面ではリザーブドインスタンスを利用することで、節約できる金額を把握することができます。

データへのアクセス方法
レポートのURLをお気に入り、ブックマークに保存することで簡単に表示することができます。よく利用するレポートで、Cost Explorerの画面に移るのが手間な時には便利です。

レポートに表示されているデータを、CSVファイル形式でダウンロードすることができます。

料金
画像に alt 属性が指定されていません。ファイル名: Untitled-Diagram-5.png
まとめ
レポートは監査目的に使用しないことが推奨されております。

資格試験でもコスト系の問題はサービスで何を確認できるかの質問はあったが、外部の人と共有というものは見かけなかった印象があります。

