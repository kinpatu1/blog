2020年9月26日 投稿者: KINPATU1
Route53+S3で静的WebサイトへHTTP通信した
AWSのサービスS3を利用すると静的Webサイトを簡単に作成することができます。

サーバと比較すると、単一リージョン内にAWSがデータを保存しているため、耐久性に優れているのと、最低利用金額がない従量課金製なのでリーズナブルという点で優れています。

今回は以下の様な構成を作成します。


目次 [非表示]

1 🔗静的Webサイトについて
2 🔗S3について
3 🔗Route53の設定
4 🔗S3の設定
5 料金表
6 まとめ
🔗静的Webサイトについて
いつ誰がどこからアクセスしても毎回同じものが表示されるものです。

これに対してデータベースを設置し、ログインや会員登録機能がある掲示板、ブログ、ショッピングサイトは動的Webサイトになります。

🔗S3について
S3は99.999999999%の耐久性があるオブジェクトストレージです。

AWSが提供するストレージサービスで、ここには画像やテキストファイルが保存でき、またHTML、CSSファイル等も保存できます。

🔗Route53の設定
前回の記事を参考にサブドメインを作成しておいてください。

この時作成したサブドメイン名は、後ほどS3の設定でも使います。

🔗S3の設定
S3のダッシュボードから「バケット」>「バケットを作成する」をクリックします。

次の画面で、「バケット名」にRoute53で設定したサブドメイン名を入力し、「リージョン」にはこのブログでは基本バージニア北部で作成していますが、東京リージョンでも問題ないです。


次の画面では何も設定しないで進みます。

「パブリックアクセスをすべてブロック」のチェックを外し、「現在の設定により、このバケットと中のオブジェクトがパブリックになる可能性があることを了承します。」にを入れます。


次の画面では何も設定しないで進み、作成したバケットをクリックします。

「アクセス権限」>「バケットポリシー」を選択し、以下内容を記入します。

{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "AddPerm",
            "Effect": "Allow",
            "Principal": "*",
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::バケット名*"
        }
    ]
}

次に「概要」>「アップロード」をクリックし以下htmlファイルをアップロードします。


“maintenance.html” をダウンロード
– 0 回のダウンロード –


追加設定はしないで「アップロード」をクリックします。


「プロパティ」>「このバケットを使用してウェブサイトをホストする」でインデックスドキュメントに、アップロードしたhtmlファイル名を入力します。


次に前回の記事を参考に「シンプルなレコードを定義」画面まで進み、値には作成したリージョン、S3名を選択します。


以上で設定は終わったので、Route53で設定したサブドメイン名をブラウザに入力すると、S3にアップロードしたhtmlファイルの内容が以下の様に表示されます。


料金表

まとめ
簡単にS3上にWebサイトが作成できました。

EC2とS3どちらで運用した方が、自分のサイトは安くなるのか計算してみても面白いかと思います。
