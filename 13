AWSのサービスEC2についてまとめました（6）

前回までで、インスタンスを作成する段階での設定についてまとめました。

今回はインスタンスを作成した後に、使える便利な機能について書いていきます。

続きを読む
🔗Create Template From Instance
前回設定したインスタンスタイプの設定を、テンプレートにしたものです。

AMIから作成するインスタンスが毎回同じ設定なのでれば、テンプレートを作成してテンプレートからインスタンスを設定することが推奨されています。

そうすることで、設定ミスを防ぐことができます。

🔗同様のものを作成
内容自体はCreate Template From Instanceと同じで、今あるインスタンスと同じ設定のインスタンスを作成するための設定です。

Create Template From Instanceと違う点は、テンプレートを作成しないで、起動中のインスタンスと同じ設定のインスタンスを作成できる点です。

🔗インスタンスの状態
🔗開始
インスタンスを停止、休止状態から起動できます。

🔗停止
インスタンスを削除しないで、料金がかからない状態にできます。

ただし、インスタンスが停止中の時は、Elastic IPに対しては課金されます。

Elastic IPをアタッチしていない限り、停止状態にして起動するとパブリックIPアドレスは変更されます。

🔗停止-休止
前回の記事を参考にしてください。

🔗再起動
再起動を必要とする更新の時に使えます。

IPアドレスは変更されないです。

🔗終了
インスタンスを削除します。

🔗インスタンスの設定
🔗Auto Scaling グループにアタッチする
「新規のAuto Scaling グループ」では、「Auto Scaling グループ名」だけ設定すれば、すぐにAuto Scalingを利用できます。

Subnetは現在設定しているSubnetだけ、希望する容量が1最大キャパシティが1の状態で作成されるので、必要に応じてAutoscallingの設定をする必要があります。

「既存のAuto Scaling グループ」では、自分で作成した起動設定、AutoScallingにアタッチすることができます。

🔗システムログの取得
OSが起動するまでの流れを見ることができます。インスタンスを停止、再起動したら新しいログが記入されます。

Linuxは電源を入れると、最初にBIOSを起動させます。下のキャプチャにはその動作が書かれています。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-08-16-1.33.22-1024x656.png
🔗インスタンスのスクリーンショットの取得
インスタンスで障害が起きると、アクセスできなくなり原因追及はできないです。

そんな時に、コンソール画面でOSの起動時に、障害が起こっていることを確認することができます。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-08-16-1.28.21.png
↑正常時、↓異常時（ランレベルの設定を変更しエラーを起こさせたので、そのことが書いています）

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-08-16-1.02.59-1024x558.png
🔗イメージ
AMIを作成することができます。

起動中だと情報に差異が生まれるので、停止している状態でAMIを作ることが推奨されています。

🔗ネットワーキング
🔗ネットワークインターフェイスのアタッチ
一つのインスタンスに対して、ネットワークインターフェイスを複数アタッチすることで、複数のプライベートIPを定義できます。

インスタンスにアタッチできるネットワークインターフェイスの数は、インスタンスタイプによって変わります。

🔗送信元/送信先の変更チェック
この設定はデフォルトで有効になっており、自分のIPアドレス以外へのパケットを破棄します

無効にすることで、自分のIPアドレス以外へのパケットも受け付けます。

🔗IP アドレスの管理
インスタンスにセカンダリプライベートIPを割り当てることができます。

ネットワークインターフェイスのアタッチと違う点としては、新しくネットワークインターフェイスは作成されないです。

🔗CloudWatchのモニタリング
🔗アラームの追加/編集
インスタンスの状態が設定している数字を、上回るか下回ることでユーザーに知らせてくれる機能です。

数字の種類としてはCPU使用率やインスタンスの停止等いろいろな物があります。

料金表
画像に alt 属性が指定されていません。ファイル名: Untitled-Diagram-6.png
まとめ
Create Template From Instance、同様のものを作成は大変便利な機能だったので、よく使う様になりました。

これまで６回に渡って、インスタンス周りの設定についてまとめてきましたが、一旦ここで終わります。

また、便利な機能があれば、追加で書いていきたいと思います。

