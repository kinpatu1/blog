CloudFormationã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç°¡å˜ã«ä½œæˆã™ã‚‹æ–¹æ³•

ã“ã‚Œã¾ã§ã®è¨˜äº‹ã§VPCã€EC2ã®ä½œæˆã¯ã™ãã«ã§ãã‚‹æ§˜ã«ãªã‚Šã¾ã—ãŸã€‚

æ…£ã‚Œã¦ãã‚‹ã¨åŒã˜ã“ã¨ã‚’ã™ã‚‹ã®ãŒé¢å€’ã«ãªã£ã¦ãã¾ã™ã€‚

ãã“ã§ãƒœã‚¿ãƒ³ä¸€ã¤ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆã‚’ä½œæˆã€å‰Šé™¤ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚‹CloudFormationã«ã¤ã„ã¦å­¦ç¿’ã—ã¾ã—ãŸã€‚

ç¶šãã‚’èª­ã‚€
ğŸ”—CloudFormation
ä½œæˆã—ãŸã„ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆã‚’ã€JSONã¾ãŸã¯YAMLã®ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§è¨˜è¿°ã—ã¾ã™ã€‚

ãã®ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’AWSã«ã‚ã’ã‚‹ã ã‘ã§ã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ğŸ”—Former2
æ—¢å­˜ã®ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆã‹ã‚‰ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ğŸ”—Former2ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä½œæˆ
ã“ã¡ã‚‰ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚

ãƒ–ãƒ©ã‚¦ã‚¶ã«å¯¾å¿œã—ãŸFormer2 Helperã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: 1-1024x561.png
ã€ŒChromeã«è¿½åŠ ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: 2-1024x564.png
åˆ©ç”¨ã—ã¦ã„ã‚‹AWSãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€Œã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼IDã€ã€ã€Œã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã€ã‚’å…¥åŠ›ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: 3-1024x563.png
ã€Œã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼IDã€ã€ã€Œã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã€ã¯IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã€ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã€ŒIAMãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã€>ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã€>ã€Œç¾åœ¨åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ã®é †ã§ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: 4-1024x530.png
ã€Œã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã®ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: 5-1024x559.png
ä»¥ä¸‹å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã‹ã€ã“ã‚Œã‹ã‚‰ã‚‚ã“ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’åˆ©ç”¨ã™ã‚‹ãªã‚‰ã€CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãŠãã¾ã™ã€‚

ã“ã®å†…å®¹ã‚’ã€Œè³‡æ ¼å†…å®¹ã€ç”»é¢ã«å…¥åŠ›ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: 6-1024x529.png
ã€ŒRelated Resourcesã€ã®è¨­å®šã ã‘è¿½åŠ ã§è¨­å®šã—ã¦ãŠãã¾ã™ã€‚

ã“ã†ã™ã‚‹ã“ã¨ã§ã€ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ã®ã«å¿…è¦ãªãƒªã‚½ãƒ¼ã‚¹ã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: 7-1024x561.png
ä»¥ä¸Šã§ã€Former2ã®è¨­å®šã¯çµ‚ã‚ã‚Šã§ã™ã€‚

ğŸ”—VPCä½œæˆ
ğŸ”—äº‹å‰æº–å‚™
VPCã€Subnetã®ä½œæˆè¨˜äº‹ã‚’è¦‹ã¦ä»¥ä¸‹æ§‹æˆã‚’ä½œã£ã¦ãã ã•ã„ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: Untitled-Diagram.png
ğŸ”—ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ
ä½œæˆã—ãŸAWSãƒªã‚½ãƒ¼ã‚¹ã‚’Former2ã«èª­ã¿è¾¼ã¾ã›ã¾ã™ã€‚

ä»¥ä¸‹ã€ãƒšãƒ¼ã‚¸ã§AWSãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆã—ãŸãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠã—ã€ã€ŒScan Againã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2020-08-16-17.31.32-1024x540.png
ã€ŒNetworking & Content Deliveryã€>ã€ŒVPCã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2020-08-16-17.35.05-1024x563.png
ã€ŒVPCã€>ã€ŒVPCsã€>ã€ŒAdd Selectedã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€VPCã‚’ä½œæˆã™ã‚‹ã®ã«å¿…è¦ãªãƒªã‚½ãƒ¼ã‚¹ã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2020-08-16-17.38.23-1024x551.png
åŒã˜ã“ã¨ã‚’ã€ŒSubnetsã€ã€ã€ŒInternet Gatewaysã€ã€ã€ŒDHCP Optionsã€ã€ã€ŒNetwork ACLsã€ã«å¯¾ã—ã¦ã—ã¾ã™ã€‚

ã€ŒEC2Subnetã€ã€ã€ŒEC2NetworkAclã€ã€ã€ŒEC2SecurityGroupã€ã€ã€ŒEC2DHCPOptionsã€ã«ã¯Nameã‚¿ã‚°ãŒã¤ã„ã¦ã„ãªã„ã®ã§ã€ä»¥ä¸‹ã®æ§˜ã«ã€ŒTagsã€ã‚’ä»˜ã‘ã¾ã™ã€‚

ã‚¤ãƒ³ãƒ†ãƒ³ãƒˆã¯æƒãˆã¦ãã ã•ã„ã€‚

    EC2Subnet:
        Type: "AWS::EC2::Subnet"
        Properties:
            AvailabilityZone: !GetAtt EC2Subnet3.AvailabilityZone
            CidrBlock: "10.0.10.0/24"
            VpcId: !Ref EC2VPC
            MapPublicIpOnLaunch: false
            Tags: 
              - 
                Key: "Name"
                Value: "blog"

- Lang Select -
data-lineå±æ€§å€¤
ãƒ•ã‚¡ã‚¤ãƒ«å
ã€ŒImportã€ã¯ã§ããªã„æ§˜ãªã®ã§ã€æ–°ã—ãymlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚

CloudFormationãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰ã€Œã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆã€>ã€Œæ–°ã—ã„ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½¿ç”¨ï¼ˆæ¨™æº–ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2020-08-16-18.12.24-1024x205.png
ã€Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€>ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã®é¸æŠã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€ä½œæˆã—ãŸymlãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸ã³ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2020-08-16-18.15.28-1024x559.png
ãã®å¾Œã®ç”»é¢ã§ã¯ç‰¹ã«è¨­å®šã—ãªãã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ãŒæ—¢ã«ã‚ã‚‹ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒã§ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2020-08-16-18.20.37-1024x563.png
ãªã®ã§ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ã€ŒEC2SecurityGroupã€ã‚’å‰Šé™¤ã—ã¾ã™ã€‚

ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ãŸã‚¹ã‚¿ãƒƒã‚¯ã‚’å‰Šé™¤ã—ã€æ–°ã—ã„ã‚¹ã‚¿ãƒƒã‚¯ã‚’ä½œæˆã—ã¾ã™ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2020-08-16-18.23.05-1024x562.png
ä»¥ä¸‹ç”»é¢ã«ãªã‚‹ã¨ã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆã¯å®Œæˆã§ã™ã®ã§ã€VPCãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ä½œæˆã—ãŸãƒªã‚½ãƒ¼ã‚¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ-2020-08-16-18.28.01-1024x563.png
ã€€

ğŸ”—å®Œæˆå½¢
AWSTemplateFormatVersion: "2010-09-09"
Metadata:
    Generator: "former2"
Description: ""
Resources:
    EC2VPC:
        Type: "AWS::EC2::VPC"
        Properties:
            CidrBlock: "10.0.0.0/16"
            EnableDnsSupport: true
            EnableDnsHostnames: false
            InstanceTenancy: "default"
            Tags: 
              - 
                Key: "Name"
                Value: "blog"

    EC2Subnet:
        Type: "AWS::EC2::Subnet"
        Properties:
            AvailabilityZone: !GetAtt EC2Subnet3.AvailabilityZone
            CidrBlock: "10.0.10.0/24"
            VpcId: !Ref EC2VPC
            MapPublicIpOnLaunch: false
            Tags: 
              - 
                Key: "Name"
                Value: "blog"

    EC2Subnet2:
        Type: "AWS::EC2::Subnet"
        Properties:
            AvailabilityZone: !GetAtt EC2Subnet4.AvailabilityZone
            CidrBlock: "10.0.20.0/24"
            VpcId: !Ref EC2VPC
            MapPublicIpOnLaunch: false
            Tags: 
              - 
                Key: "Name"
                Value: "blog"

    EC2Subnet3:
        Type: "AWS::EC2::Subnet"
        Properties:
            AvailabilityZone: !Sub "${AWS::Region}a"
            CidrBlock: "10.0.1.0/24"
            VpcId: !Ref EC2VPC
            MapPublicIpOnLaunch: false
            Tags: 
              - 
                Key: "Name"
                Value: "blog"

    EC2Subnet4:
        Type: "AWS::EC2::Subnet"
        Properties:
            AvailabilityZone: !Sub "${AWS::Region}b"
            CidrBlock: "10.0.2.0/24"
            VpcId: !Ref EC2VPC
            MapPublicIpOnLaunch: false
            Tags: 
              - 
                Key: "Name"
                Value: "blog"

    EC2NetworkAcl:
        Type: "AWS::EC2::NetworkAcl"
        Properties:
            VpcId: !Ref EC2VPC
            Tags: 
              - 
                Key: "Name"
                Value: "blog"

    EC2RouteTable:
        Type: "AWS::EC2::RouteTable"
        Properties:
            VpcId: !Ref EC2VPC
            Tags: 
              - 
                Key: "Name"
                Value: "private"

    EC2RouteTable2:
        Type: "AWS::EC2::RouteTable"
        Properties:
            VpcId: !Ref EC2VPC
            Tags: 
              - 
                Key: "Name"
                Value: "public"

    EC2VPCDHCPOptionsAssociation:
        Type: "AWS::EC2::VPCDHCPOptionsAssociation"
        Properties:
            DhcpOptionsId: !Ref EC2DHCPOptions
            VpcId: !Ref EC2VPC

    EC2VPCGatewayAttachment:
        Type: "AWS::EC2::VPCGatewayAttachment"
        Properties:
            InternetGatewayId: !Ref EC2InternetGateway
            VpcId: !Ref EC2VPC

    EC2SubnetNetworkAclAssociation:
        Type: "AWS::EC2::SubnetNetworkAclAssociation"
        Properties:
            SubnetId: !Ref EC2Subnet4
            NetworkAclId: !Ref EC2NetworkAcl

    EC2SubnetNetworkAclAssociation2:
        Type: "AWS::EC2::SubnetNetworkAclAssociation"
        Properties:
            SubnetId: !Ref EC2Subnet3
            NetworkAclId: !Ref EC2NetworkAcl

    EC2SubnetNetworkAclAssociation3:
        Type: "AWS::EC2::SubnetNetworkAclAssociation"
        Properties:
            SubnetId: !Ref EC2Subnet
            NetworkAclId: !Ref EC2NetworkAcl

    EC2SubnetNetworkAclAssociation4:
        Type: "AWS::EC2::SubnetNetworkAclAssociation"
        Properties:
            SubnetId: !Ref EC2Subnet2
            NetworkAclId: !Ref EC2NetworkAcl

    EC2SubnetRouteTableAssociation:
        Type: "AWS::EC2::SubnetRouteTableAssociation"
        Properties:
            RouteTableId: !Ref EC2RouteTable
            SubnetId: !Ref EC2Subnet

    EC2SubnetRouteTableAssociation2:
        Type: "AWS::EC2::SubnetRouteTableAssociation"
        Properties:
            RouteTableId: !Ref EC2RouteTable
            SubnetId: !Ref EC2Subnet2

    EC2SubnetRouteTableAssociation3:
        Type: "AWS::EC2::SubnetRouteTableAssociation"
        Properties:
            RouteTableId: !Ref EC2RouteTable2
            SubnetId: !Ref EC2Subnet3

    EC2SubnetRouteTableAssociation4:
        Type: "AWS::EC2::SubnetRouteTableAssociation"
        Properties:
            RouteTableId: !Ref EC2RouteTable2
            SubnetId: !Ref EC2Subnet4

    EC2InternetGateway:
        Type: "AWS::EC2::InternetGateway"
        Properties:
            Tags: 
              - 
                Key: "Name"
                Value: "blog"

    EC2Route:
        Type: "AWS::EC2::Route"
        Properties:
            DestinationCidrBlock: "0.0.0.0/0"
            GatewayId: !Ref EC2InternetGateway
            RouteTableId: !Ref EC2RouteTable2

    EC2DHCPOptions:
        Type: "AWS::EC2::DHCPOptions"
        Properties:
            DomainName: "ec2.internal"
            Tags: 
              - 
                Key: "Name"
                Value: "blog"

    EC2NetworkAclEntry:
        Type: "AWS::EC2::NetworkAclEntry"
        Properties:
            CidrBlock: "0.0.0.0/0"
            Egress: true
            NetworkAclId: !Ref EC2NetworkAcl
            Protocol: -1
            RuleAction: "allow"
            RuleNumber: 100

    EC2NetworkAclEntry2:
        Type: "AWS::EC2::NetworkAclEntry"
        Properties:
            CidrBlock: "0.0.0.0/0"
            Egress: false
            NetworkAclId: !Ref EC2NetworkAcl
            Protocol: -1
            RuleAction: "allow"
            RuleNumber: 100



- Lang Select -
data-lineå±æ€§å€¤
ãƒ•ã‚¡ã‚¤ãƒ«å
æ–™é‡‘è¡¨
ç”»åƒã« alt å±æ€§ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å: Untitled-Diagram-7.png
ã¾ã¨ã‚
ä»Šå›ã¯CloudFormationã®æ“ä½œã‚’ã–ã£ã¨æ›¸ãã¾ã—ãŸã€‚

æ¬¡å›ä»¥é™ã§CloudFormationã‚’æ‰±ã†ä¸Šã§ã€å‡ºã¦ãã‚‹ç”¨èªã®è¨­å®šã‚„ä¾¿åˆ©æ©Ÿèƒ½ã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã„ãã¾ã™ã€‚

