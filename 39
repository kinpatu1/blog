スポットインスタンスを作成してみた(2)_ver2

前回の記事で起動テンプレートの作成方法については書きましたが、そこからインスタンスを作成する方法、起動テンプレートの管理方法等については書けませんでした。

これから2回に分けて書いていきます。

続きを読む
🔗テンプレートからインスタンスを起動
「EC2のダッシュボード」>「起動テンプレート」>「起動テンプレートを作成」の順でクリックします。

今回は以下の様に必要最低限の設定だけをしました。
設定内容に関しては前回の記事を参考にしてください。

起動テンプレート名	test
テンプレートバージョンの説明	test
AMI	Amazon Linux 2 AMI
インスタンスタイプ	t2.micro
キーペア（ログイン）	既存のpemキー
ネットワーキングプラットフォーム	VPC
セキュリティグループ	既存のセキュリティグループ
﻿
次に、作成した起動テンプレートからインスタンスを作成します。

「起動テンプレート」>「作成した起動テンプレート」>「アクション」>「テンプレートからインスタンスを起動」の順でクリックします。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-11-30-1.47.13-1536x844-1-1024x563.png
起動テンプレートを作成した時の内容が自動で入力されているので、追加設定するのはサブネットだけになります。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-11-30-1.50.56-1024x558.png
以上の設定でインスタンスが作成できました。
タグを見ると起動テンプレートから作成されたこと、バージョンについて確認することができます。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-11-30-1.52.42-1024x561.png
🔗テンプレートを変更 (新しいバージョンを作成)
新しいバージョンを作成することで、テンプレートの一部を変更することができます。
今回は「インスタンスタイプ」を変更します。

「起動テンプレート」>「作成した起動テンプレート」>「アクション」>「テンプレートを変更」の順でクリックします。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-11-30-1.53.52-1536x843-1-1024x562.png
インスタンスタイプをt2.micro→t1.microに変更します。（この時に「テンプレートバージョンの説明」に変更内容を書いていても良いです）

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-11-30-1.55.49-1024x559.png
バージョンが2つできているのが確認できます。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-11-30-1.53.52-1536x843-2-1024x562.png
🔗テンプレートを削除
この画面ではテンプレートそのものを削除します。（テンプレートの各バージョンを削除するものではないです）

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-11-30-2.50.01-1024x380.png
🔗テンプレートのバージョンを削除
以下画面ではテンプレートのバージョンを削除することができます。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-11-30-2.51.58-1024x420.png
🔗デフォルトバージョンを設定
複数バージョンを作成した中で、どのバージョンを起動テンプレートに利用するか設定できます。

方法としては以下2つの画面から進むことができます。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-11-30-2.58.53-1-1024x561.png
🔗タグを管理
起動テンプレートの設定では、「テンプレートタグ」と「リソースタグ」がありましたが、以下設定は「テンプレートタグ」に関するものです。

方法としては以下2つの画面から進むことができます。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-11-30-3.02.26-1-1024x565.png
🔗スポットフリートを作成
以下画面より、作成した起動テンプレートから、スポットリクエストを作成することができます。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-11-30-3.15.06-1024x429.png
🔗Auto Scalling グループを作成
以下画面より、作成した起動テンプレートから、Auto Scallingグループの設定を作成することができます。

画像に alt 属性が指定されていません。ファイル名: スクリーンショット-2020-11-30-3.16.42-1024x427.png

料金表
画像に alt 属性が指定されていません。ファイル名: Untitled-Diagram-20.png
まとめ
今回の設定ですが、以前の記事でも実は一度触れていました。

以前の記事の内容を利用すると、現在利用している設定と差分が発生しないので、便利かと思います。

